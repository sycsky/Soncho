server:
  port: 8080

spring:
  application:
    name: nexus-support-ai
  profiles:
    active: dev,local  # 开发时加载 dev 和 local 配置
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 50MB
  data:
    redis:
      host: 127.0.0.1
      port: 6379
      password: ""
  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        type:
          preferred_uuid_jdbc_type: CHAR
    open-in-view: false
  jackson:
    serialization:
      write-dates-as-timestamps: false

logging:
  level:
    root: INFO
    com.example.aikef: DEBUG
    com.yomahub.liteflow: DEBUG

# LiteFlow 工作流引擎配置
liteflow:
  # 规则文件路径（使用代码动态加载，此处留空）
  rule-source:
  # 打印执行日志
  print-execution-log: true
  # 线程池设置
  when-max-wait-seconds: 60
  when-max-workers: 16
  # 监控设置
  monitor:
    enable-log: true
    period: 300000

# AI 配置
ai:
  openai:
    api-key: ${OPENAI_API_KEY:}
    base-url: ${OPENAI_BASE_URL:https://api.openai.com/v1}

# 知识库配置
knowledge:
  embedding:
    # 默认嵌入模型
    default-model: text-embedding-3-small
    # 默认向量维度
    default-dimension: 1536
  # PGVector 向量存储配置
  pgvector:
    host: 127.0.0.1
    port: 5432
    database: vectordb
    user: postgres
    password: ${PGVECTOR_PASSWORD:}

# 文件存储配置
storage:
  # 存储类型: local (本地存储) 或 s3 (AWS S3/兼容存储)
  type: local
  # 最大文件大小 (字节), 默认 10MB
  max-file-size: 10485760
  # 允许的文件类型
  allowed-image-types: image/jpeg,image/png,image/gif,image/webp,image/svg+xml
  allowed-document-types: application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/plain,text/csv
  allowed-video-types: video/mp4,video/webm,video/quicktime
  allowed-audio-types: audio/mpeg,audio/wav,audio/ogg
  # 本地存储配置
  local:
    base-path: ./uploads
    base-url: http://localhost:8080/api/v1/files
  # AWS S3 存储配置 (当 storage.type=s3 时生效)
  s3:
    access-key: ${AWS_ACCESS_KEY:}
    secret-key: ${AWS_SECRET_KEY:}
    region: ${AWS_REGION:us-east-1}
    bucket: ${AWS_S3_BUCKET:}
    # 可选: 自定义端点 (用于 MinIO、阿里云 OSS 等 S3 兼容存储)
    endpoint: ${AWS_S3_ENDPOINT:}
    # 可选: 公共访问URL (如果配置了 CDN 或公开 bucket)
    public-url: ${AWS_S3_PUBLIC_URL:}
    # 预签名URL过期时间 (秒), 默认 1 小时
    presigned-url-expiration: 3600

# AWS Translate 翻译服务配置
translation:
  enabled: true
  # AWS 凭证（如果已在 storage.s3 中配置，可复用）
  aws:
    access-key: ${AWS_TRANSLATE_ACCESS_KEY:}
    secret-key: ${AWS_TRANSLATE_SECRET_KEY:}
    region: ${AWS_REGION:us-east-1}
  # 支持的目标语言列表（可按需添加更多语言）
  # 语言代码参考: https://docs.aws.amazon.com/translate/latest/dg/what-is-languages.html
  target-languages:
    - code: zh-TW
      name: 中文繁体
    - code: en
      name: English
    - code: ja
      name: 日本語
  # 默认系统语言（客服和AI使用的语言）
  default-system-language: zh-CN
