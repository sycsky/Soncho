# ================================
# 生产环境配置
# ================================
# 所有敏感信息通过环境变量注入
app:
  saas:
    enabled: true
spring:
  # 数据库配置
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  # Redis 配置
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      password: ${SPRING_DATA_REDIS_PASSWORD:}
  # JPA 配置
  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect
    hibernate:
      ddl-auto: validate  # 生产环境不自动更新表结构
    properties:
      hibernate:
        format_sql: false
        type:
          preferred_uuid_jdbc_type: CHAR
    open-in-view: false

# 日志配置 - 生产环境减少日志
logging:
  level:
    root: WARN
    com.example.aikef: INFO
    com.yomahub.liteflow: WARN

# AI 配置
ai:
  openai:
    api-key: ${OPENAI_API_KEY}
    base-url: ${OPENAI_BASE_URL:https://api.openai.com/v1}

# 知识库 - PGVector 配置
knowledge:
  pgvector:
    host: ${KNOWLEDGE_PGVECTOR_HOST}
    port: ${KNOWLEDGE_PGVECTOR_PORT:5432}
    database: ${KNOWLEDGE_PGVECTOR_DATABASE:vectordb}
    user: ${KNOWLEDGE_PGVECTOR_USER:postgres}
    password: ${PGVECTOR_PASSWORD}

# 文件存储 - 暂时使用本地存储
storage:
  type: local
  local:
    base-path: ./uploads
    base-url: ${LOCAL_STORAGE_BASE_URL:/api/v1/files}

# 翻译服务 - 生产环境启用
translation:
  enabled: ${TRANSLATION_ENABLED:true}
  aws:
    access-key: ${AWS_TRANSLATE_ACCESS_KEY}
    secret-key: ${AWS_TRANSLATE_SECRET_KEY}
    region: ${AWS_REGION:ap-northeast-1}
